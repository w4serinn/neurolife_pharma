<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>‰æùÈ†ºËÄÖ„Å®„ÅÆ„ÉÅ„É£„ÉÉ„Éà | Ë™øÊüª‰æùÈ†º</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+JP:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0a4d68;
            --secondary: #088395;
            --accent: #05c3dd;
            --dark: #051923;
            --light: #f0f9ff;
            --warning: #ff6b6b;
            --success: #51cf66;
            --client-bubble: #3a3a3c;
            --user-bubble: #0b7ce6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: #1c1c1e;
            color: var(--light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(5, 25, 35, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .header-info {
            flex: 1;
        }

        .contact-name {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--light);
        }

        .contact-status {
            font-size: 0.85rem;
            color: rgba(240, 249, 255, 0.6);
            margin-top: 0.2rem;
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            margin-right: 0.5rem;
            animation: pulse-status 2s infinite;
        }

        @keyframes pulse-status {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-container {
            position: fixed;
            top: 60px;
            bottom: 80px;
            left: 0;
            right: 0;
            overflow-y: auto;
            padding: 1.5rem;
            background: #000;
            scroll-behavior: smooth;
        }

        /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº„ÅÆ„Çπ„Çø„Ç§„É™„É≥„Ç∞ */
        .chat-container::-webkit-scrollbar {
            width: 8px;
        }

        .chat-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .chat-container::-webkit-scrollbar-thumb {
            background: rgba(5, 195, 221, 0.3);
            border-radius: 4px;
        }

        .chat-container::-webkit-scrollbar-thumb:hover {
            background: rgba(5, 195, 221, 0.5);
        }

        .date-separator {
            text-align: center;
            margin: 1.5rem 0;
            color: rgba(240, 249, 255, 0.5);
            font-size: 0.8rem;
        }

        .message {
            display: flex;
            margin-bottom: 1rem;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.client-message {
            justify-content: flex-start;
        }

        .message.user-message {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 70%;
            padding: 0.8rem 1rem;
            border-radius: 18px;
            line-height: 1.5;
            position: relative;
            word-wrap: break-word;
        }

        .client-message .message-bubble {
            background: var(--client-bubble);
            border-bottom-left-radius: 4px;
        }

        .user-message .message-bubble {
            background: var(--user-bubble);
            border-bottom-right-radius: 4px;
            color: white;
        }

        .message-time {
            font-size: 0.7rem;
            color: rgba(240, 249, 255, 0.5);
            margin-top: 0.3rem;
            text-align: right;
        }

        .client-message .message-time {
            text-align: left;
        }

        .attachment {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 0.8rem;
            margin-top: 0.5rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .attachment:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--accent);
        }

        .attachment-icon {
            margin-right: 0.5rem;
        }

        .typing-indicator {
            display: none;
            padding: 0.8rem 1rem;
            background: var(--client-bubble);
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            max-width: 60px;
            margin-bottom: 1rem;
        }

        .typing-indicator.active {
            display: inline-block;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: rgba(240, 249, 255, 0.6);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.6; }
            30% { transform: translateY(-8px); opacity: 1; }
        }

        .input-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(5, 25, 35, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 1.5rem;
            display: flex;
            gap: 0.8rem;
            align-items: center;
            z-index: 100;
        }

        #userInput {
            flex: 1;
            background: rgba(58, 58, 60, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 0.8rem 1.2rem;
            color: var(--light);
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 0.95rem;
            outline: none;
            transition: all 0.3s;
        }

        #userInput:focus {
            border-color: var(--accent);
            background: rgba(58, 58, 60, 1);
        }

        #sendButton {
            background: var(--accent);
            color: var(--dark);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        #sendButton:hover {
            transform: scale(1.1);
            background: var(--light);
        }

        #sendButton:active {
            transform: scale(0.95);
        }

        .notification {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--warning);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(255, 107, 107, 0.4);
            z-index: 1000;
            animation: slideDown 0.3s ease-out;
            display: none;
        }

        .notification.show {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        .quick-replies {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .quick-reply {
            background: rgba(5, 195, 221, 0.2);
            border: 1px solid var(--accent);
            padding: 0.5rem 1rem;
            border-radius: 16px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--accent);
        }

        .quick-reply:hover {
            background: rgba(5, 195, 221, 0.3);
            transform: translateY(-2px);
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .message-bubble {
                max-width: 85%;
            }

            .chat-container {
                top: 55px;
                bottom: 75px;
            }

            .input-container {
                padding: 0.8rem 1rem;
            }

            #userInput {
                font-size: 0.9rem;
            }
        }

        /* ÁîªÂÉèË°®Á§∫Áî® */
        .message-image {
            max-width: 100%;
            border-radius: 8px;
            margin-top: 0.5rem;
            cursor: pointer;
        }

        .evidence-tag {
            display: inline-block;
            background: rgba(255, 107, 107, 0.2);
            color: var(--warning);
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-top: 0.5rem;
            border: 1px solid var(--warning);
        }
    </style>
</head>
<body>
    <div class="notification" id="notification">
        üì© Êñ∞„Åó„ÅÑÊÉÖÂ†±„ÅåÂ±ä„Åç„Åæ„Åó„Åü
    </div>

    <header>
        <div class="header-info">
            <div class="contact-name">‰æùÈ†ºËÄÖÔºàÂåøÂêçÂ∏åÊúõÔºâ</div>
            <div class="contact-status">
                <span class="status-indicator"></span>„Ç™„É≥„É©„Ç§„É≥
            </div>
        </div>
    </header>

    <div class="chat-container" id="chatContainer">
        <div class="date-separator">‰ªäÊó•</div>

        <!-- ÂàùÊúü„É°„ÉÉ„Çª„Éº„Ç∏„ÅØJavaScript„ÅßËøΩÂä† -->
    </div>

    <div class="typing-indicator" id="typingIndicator">
        <div class="typing-dots">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
        </div>
    </div>

    <div class="input-container">
        <input type="text" id="userInput" placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ..." onkeypress="handleKeyPress(event)">
        <button id="sendButton" onclick="sendMessage()">‚Üë</button>
    </div>

    <script>
        // „Çπ„Éà„Éº„É™„ÉºÈÄ≤Ë°åÁä∂ÊÖã„ÇíÁÆ°ÁêÜ
        let storyState = {
            phase: 0,
            foundNemophila: false,
            foundCode2847: false,
            accessedInternal: false,
            knowsDreamLink: false,
            askedAboutFacility: false,
            askedAboutPassword: false,
            hintCount: 0,
            askedAboutPassword2: false,
            hintCount2: 0
        };

        // LocalStorage„Åã„ÇâÁä∂ÊÖã„ÇíË™≠„ÅøËæº„Åø
        function loadState() {
            const saved = localStorage.getItem('investigationState');
            if (saved) {
                storyState = JSON.parse(saved);
            }
        }

        // LocalStorage„Å´Áä∂ÊÖã„Çí‰øùÂ≠ò
        function saveState() {
            localStorage.setItem('investigationState', JSON.stringify(storyState));
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´Áä∂ÊÖã„ÇíÂæ©ÂÖÉ
        loadState();

        // „É°„ÉÉ„Çª„Éº„Ç∏Â±•Ê≠¥„Çí‰øùÂ≠ò„ÉªÂæ©ÂÖÉ
        let messageHistory = [];

        function saveMessages() {
            localStorage.setItem('chatHistory', JSON.stringify(messageHistory));
        }

        function loadMessages() {
            const saved = localStorage.getItem('chatHistory');
            if (saved) {
                messageHistory = JSON.parse(saved);
                messageHistory.forEach(msg => {
                    addMessageToDOM(msg.text, msg.isUser, msg.hasAttachment, msg.hasQuickReplies, msg.timestamp);
                });
                // Â±•Ê≠¥Ë™≠„ÅøËæº„ÅøÂæå„Å´„Çπ„ÇØ„É≠„Éº„É´
                setTimeout(() => {
                    scrollToBottom();
                }, 500);
            } else {
                // ÂàùÂõûË®™ÂïèÊôÇ„ÅÆÂàùÊúü„É°„ÉÉ„Çª„Éº„Ç∏
                showInitialMessages();
            }
        }

        function showInitialMessages() {
            setTimeout(() => {
                addMessage('„ÅÇ„ÅÆ„ÄÅ„Å™„Çì„Åß„ÇÇÁõ∏Ë´á„Å´„ÅÆ„Çã„Å£„Å¶SNS„Å´Êõ∏„ÅÑ„Å¶„Åü„ÅÆ„ÅßÈÄ£Áµ°„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ', false);
                setTimeout(scrollToBottom, 400);
            }, 500);

            setTimeout(() => {
                addMessage('Âèã‰∫∫„ÅÆÂâçÁî∞„É¶„Ç¶„Çπ„Ç±„ÅåÂÖàÊúà„ÄÅNeuroLifeË£ΩËñ¨„Å®„ÅÑ„ÅÜ‰ºöÁ§æ„ÅÆÊ≤ªÈ®ì„Éê„Ç§„Éà„Å´ÂèÇÂä†„Åó„Å¶„Åã„ÇâÈÄ£Áµ°„ÅåÂèñ„Çå„Å™„Åè„Å™„Çä„Åæ„Åó„Åü„ÄÇÊúÄÂæå„Å´„Äå„Åô„Åî„ÅÑÂ†±ÈÖ¨„Å†„Åã„Çâ3ÈÄ±ÈñìÈ†ëÂºµ„Å£„Å¶„Åè„Çã„Äç„Å£„Å¶ÈÄ£Áµ°„ÇíÊúÄÂæå„Å´„ÄÅÊó¢Ë™≠„ÇÇ„Å§„Åç„Åæ„Åõ„Çì„ÄÇ', false);
                setTimeout(scrollToBottom, 400);
            }, 2500);

            setTimeout(() => {
                addMessage('‰ºöÁ§æ„ÅÆ„Éõ„Éº„É†„Éö„Éº„Ç∏„ÇíË¶ã„Å§„Åë„Åü„Çì„Åß„Åô„Åå„ÄÅ‰ªä„ÅØËá®Â∫äË©¶È®ì„ÅÆÂãüÈõÜ„ÇÇ„Åó„Å¶„ÅÑ„Å™„ÅÑ„Åø„Åü„ÅÑ„Åß‚Ä¶', false);
                setTimeout(scrollToBottom, 400);
            }, 5000);

            setTimeout(() => {
                addMessage('‰Ωï„Åã„Åä„Åã„Åó„ÅÑ„Çì„Åß„Åô„ÄÇË™ø„Åπ„Å¶„ÇÇ„Çâ„Åà„Åæ„Åõ„Çì„ÅãÔºü', false, true);
                setTimeout(scrollToBottom, 400);
            }, 7000);
        }

        function scrollToBottom() {
            const container = document.getElementById('chatContainer');
            setTimeout(() => {
                // „Çπ„É†„Éº„Ç∫„Å´„Çπ„ÇØ„É≠„Éº„É´
                container.scrollTo({
                    top: container.scrollHeight,
                    behavior: 'smooth'
                });
            }, 350);
        }

        function addMessageToDOM(text, isUser = false, hasAttachment = false, hasQuickReplies = false, timestamp = null) {
            const container = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'client-message'}`;

            const time = timestamp || new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });

            let attachmentHTML = '';
            if (hasAttachment && !isUser) {
                attachmentHTML = `
                    <div class="attachment" onclick="window.open('company-site.html', '_blank')">
                        <span class="attachment-icon">üîó</span>
                        NeuroLifeË£ΩËñ¨ ÂÖ¨Âºè„Çµ„Ç§„Éà
                    </div>
                `;
            }

            let quickRepliesHTML = '';
            if (hasQuickReplies && !isUser) {
                quickRepliesHTML = `
                    <div class="quick-replies">
                        <div class="quick-reply" onclick="sendQuickReply('Ë™ø„Åπ„Å¶„Åø„Åæ„Åô')">Ë™ø„Åπ„Å¶„Åø„Åæ„Åô</div>
                        <div class="quick-reply" onclick="sendQuickReply('Ë©≥„Åó„ÅèÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ')">Ë©≥„Åó„ÅèÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ</div>
                    </div>
                `;
            }

            messageDiv.innerHTML = `
                <div class="message-bubble">
                    ${text.replace(/\n/g, '<br>')}
                    ${attachmentHTML}
                    <div class="message-time">${time}</div>
                </div>
                ${quickRepliesHTML}
            `;

            container.appendChild(messageDiv);

            // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂÆå‰∫ÜÂæåÔºà350msÔºâ„Å´„Çπ„É†„Éº„Ç∫„Å´„Çπ„ÇØ„É≠„Éº„É´
            setTimeout(() => {
                container.scrollTo({
                    top: container.scrollHeight,
                    behavior: 'smooth'
                });
            }, 350);
        }

        function addMessage(text, isUser = false, hasAttachment = false, hasQuickReplies = false) {
            const msg = {
                text: text,
                isUser: isUser,
                hasAttachment: hasAttachment,
                hasQuickReplies: hasQuickReplies,
                timestamp: new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' })
            };

            messageHistory.push(msg);
            saveMessages();
            addMessageToDOM(text, isUser, hasAttachment, hasQuickReplies, msg.timestamp);
        }

        function showTyping() {
            document.getElementById('typingIndicator').classList.add('active');
        }

        function hideTyping() {
            document.getElementById('typingIndicator').classList.remove('active');
        }

        function showNotification(text = 'üì© Êñ∞„Åó„ÅÑÊÉÖÂ†±„ÅåÂ±ä„Åç„Åæ„Åó„Åü') {
            const notification = document.getElementById('notification');
            notification.textContent = text;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function getBotResponse(userMessage) {
            const message = userMessage.toLowerCase().trim();

            // ÂÖ®PhaseÂÖ±ÈÄö: Ë©≥Á¥∞„ÇíÊ±Ç„ÇÅ„Çã
            if (message.includes('Ë©≥„Åó„Åè') || message.includes('„ÇÇ„Å£„Å®') || message.includes('Ë©≥Á¥∞') || message.includes('Ë≠¶ÂØü')) {
                return {
                    text: '„É¶„Ç¶„Çπ„Ç±„Å®„ÅØÂ§ßÂ≠¶„ÅÆÂêåÁ¥öÁîü„Åß„ÄÅ„ÅÑ„Å§„ÇÇÈÄ£Áµ°„ÇíÂèñ„ÇäÂêà„Å£„Å¶„ÅÑ„Åü„Çì„Åß„Åô„ÄÇ\n\nÂÖàÊúà„Äå„ÅäÈáë„ÅåÂøÖË¶Å„Å†„Åã„ÇâÊ≤ªÈ®ì„Éê„Ç§„Éà„ÇÑ„Çã„Äç„Å£„Å¶Ë®Ä„Å£„Å¶„Åã„Çâ„ÄÅ„Å±„Å£„Åü„ÇäÈÄ£Áµ°„ÅåÈÄîÁµ∂„Åà„Å¶‚Ä¶\n\nÂøÉÈÖç„ÅßË≠¶ÂØü„Å´„ÇÇÁõ∏Ë´á„Åó„Åü„Çì„Åß„Åô„Åå„ÄÅÊàê‰∫∫„Å†„Åó‰∫ã‰ª∂ÊÄß„Åå„Å™„ÅÑ„Å£„Å¶Âèñ„ÇäÂêà„Å£„Å¶„ÇÇ„Çâ„Åà„Å™„Åè„Å¶„ÄÇ',
                    delay: 1000
                };
            }

            // ÂÖ®PhaseÂÖ±ÈÄö: Ë™ïÁîüÊó•„Å´„Å§„ÅÑ„Å¶
            if (message.includes('Ë™ïÁîüÊó•') || message.includes('ÁîüÂπ¥ÊúàÊó•')) {
                return {
                    text: '„É¶„Ç¶„Çπ„Ç±„ÅÆË™ïÁîüÊó•„Åß„Åô„ÅãÔºü2004Âπ¥3Êúà15Êó•Áîü„Åæ„Çå„Åß„ÄÅ‰ªä21Ê≠≥„Åß„Åô„ÄÇ\n\n„ÅÑ„Å§„ÇÇË™ïÁîüÊó•„Å´„ÅØ‰∏ÄÁ∑í„Å´ÈÅé„Åî„Åó„Å¶„ÅÑ„Åü„ÅÆ„Å´‚Ä¶‰ªäÂπ¥„ÅØÈÄ£Áµ°„ÅåÂèñ„Çå„Å™„Åè„Å¶ÂøÉÈÖç„Åß„Åô„ÄÇ',
                    delay: 1000
                };
            }

            // Phase 0: ÂàùÊúüÂØæÂøú
            if (storyState.phase === 0) {
                // Phase 1„ÅÆ„Ç≠„Éº„ÉØ„Éº„Éâ„ÅåÊù•„Åü„ÇâËá™ÂãïÁöÑ„Å´Phase 1„Å´ÁßªË°å
                if (message.includes('Ë£ΩÂìÅ') || message.includes('neurosync') || message.includes('memoriaplus') ||
                    message.includes('dreamlink') || message.includes('dl-x789') || message.includes('x789') ||
                    message.includes('Ëá®Â∫äË©¶È®ì') || message.includes('Ë¢´È®ìËÄÖ') ||
                    message.includes('Êñ∞„Çµ„Ç§„Éà') || message.includes('Á§æÂÜÖÊÉÖÂ†±„Ç∑„Çπ„ÉÜ„É†') ||
                    message.includes('„Éë„Çπ„ÉØ„Éº„Éâ') || message.includes('nemophila')) {
                    storyState.phase = 1;
                    saveState();
                }
                // ÈÄöÂ∏∏„ÅÆÂêåÊÑè„Å´„Çà„ÇãÁßªË°å
                else if (message.includes('Ë™ø„Åπ') || message.includes('„Çè„Åã„Çä') || message.includes('„Çè„Åã„Å£„Åü') || message.includes('ÂàÜ„Åã„Çä') || message.includes('ÂàÜ„Åã„Å£„Åü') || message.includes('„ÅØ„ÅÑ') || message.includes('ÂçîÂäõ') || message.includes('„ÅÜ„Çì')) {
                    storyState.phase = 1;
                    saveState();
                    return {
                        text: '„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ„É¶„Ç¶„Çπ„Ç±„ÅåÂèÇÂä†„Åó„Åü„ÅÆ„ÅØ„ÄåDreamLink„Äç„Å®„ÅÑ„ÅÜÁù°Áú†Ëñ¨„ÅÆÊ≤ªÈ®ì„Å†„Å£„Åü„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ\nÂÉï„ÇÇ„Çµ„Ç§„Éà„ÇíË™ø„Åπ„Åæ„Åô„ÅÆ„Åß‰∏ÄÁ∑í„Å´Ë™øÊüª„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„ÅôÔºÅ',
                        delay: 1000
                    };
                }
            }

            // Phase 1Â∞ÇÁî®: „É¶„Éº„Ç∂„Éº„ÅåËá™Áî±„Å´Ë™øÊüª
            if (storyState.phase === 1) {
                // Ë£ΩÂìÅ„Å´„Å§„ÅÑ„Å¶
                if (message.includes('Ë£ΩÂìÅ') || message.includes('neurosync') || message.includes('memoriaplus')) {
                    return {
                        text: 'dreamlink‰ª•Â§ñ„Å´„ÇÇ„ÅÑ„Åè„Å§„ÅãË£ΩÂìÅ„Åå„ÅÇ„Çã„Çì„Åß„Åô„Å≠„ÄÇ',
                        delay: 1000
                    };
                }

                // DreamLink„Å´„Å§„ÅÑ„Å¶
                if (message.includes('dreamlink')) {
                    return {
                        text: 'Ëá®Â∫äË©¶È®ì‰∏≠„Å®„ÅØË®òËºâ„Åå„ÅÇ„Çã„ÇÇ„ÅÆ„ÅÆ„ÄÅ„Å©„Åì„Åã„Å´Ë©≥Á¥∞„ÅåÁÑ°„ÅÑ„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ',
                        delay: 1000
                    };
                }

                // Ë£ΩÂìÅ„Ç≥„Éº„Éâ DL-X789„Å´„Å§„ÅÑ„Å¶
                if (message.includes('dl-x789-omega') || message.includes('dl-x789') || message.includes('x789')) {
                    return {
                        text: '„Åï„Åô„Åå„Å´‰∏≠Ë∫´„Å´„Å§„ÅÑ„Å¶„ÅØÁ§æÂÜÖÊÉÖÂ†±„Ç∑„Çπ„ÉÜ„É†„Çµ„Ç§„Éà„Å´Ë°å„Åã„Å™„ÅÑ„Å®„Å†„ÇÅ„Åø„Åü„ÅÑ„Åß„Åô„Å≠„ÄÇ„Åì„ÅÆ„Çµ„Ç§„Éà„ÇÇË¶ã„Å§„Åë„Åü„ÅÑ„Åß„Åô„ÄÇ',
                        delay: 1000
                    };
                }

                // Ëá®Â∫äË©¶È®ì„Å´„Å§„ÅÑ„Å¶
                if (message.includes('Ëá®Â∫äË©¶È®ì') && !message.includes('Ë¢´È®ìËÄÖ')) {
                    return {
                        text: '„ÄåËá®Â∫äË©¶È®ìË¢´È®ìËÄÖ„ÅÆÊñπ„Å∏„Äç„Å®„ÅÑ„ÅÜ„Éö„Éº„Ç∏„ÅØ„ÇÇ„ÅÜ„É™„É≥„ÇØÂàá„ÇåÔºü„Å£„Å¶„Åì„Å®„Åß„Åô„Åã„Å≠„ÄÇ',
                        delay: 1000
                    };
                }

                // Ëá®Â∫äË©¶È®ìË¢´È®ìËÄÖ„ÅÆÊñπ„Å∏
                if (message.includes('Ëá®Â∫äË©¶È®ìË¢´È®ìËÄÖ') || message.includes('Ë¢´È®ìËÄÖ„ÅÆÊñπ„Å∏')) {
                    return {
                        text: 'Êñ∞„Çµ„Ç§„Éà„Å´„ÅØ„Åì„ÅÆ„Éö„Éº„Ç∏„Åå„ÅÇ„Çä„Åù„ÅÜ„Åß„Åô„Å≠„ÄÇ„Å©„ÅÜ„Å´„Åã„Åó„Å¶Ë¶ã„Å§„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                        delay: 1000
                    };
                }

                // Êñ∞„Çµ„Ç§„Éà„ÉªÁ§æÂÜÖÊÉÖÂ†±„Ç∑„Çπ„ÉÜ„É†„Çµ„Ç§„Éà
                if (message.includes('Êñ∞„Çµ„Ç§„Éà') || message.includes('Á§æÂÜÖÊÉÖÂ†±„Ç∑„Çπ„ÉÜ„É†')) {
                    return {
                        text: '„Å©„ÅÜ„ÇÑ„Çâ„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•„Çå„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„Åø„Åü„ÅÑ„Åß„Åô„Å≠„ÄÇ',
                        delay: 1000
                    };
                }

                // „Éë„Çπ„ÉØ„Éº„Éâ
                if (message.includes('„Éë„Çπ„ÉØ„Éº„Éâ')) {
                    storyState.askedAboutPassword = true;
                    storyState.hintCount = 0;
                    saveState();
                    return {
                        text: '„Éë„Çπ„ÉØ„Éº„Éâ„Å´„Å§„ÅÑ„Å¶AI„Çµ„Éù„Éº„Éà„ÅåÊïô„Åà„Å¶„Åè„Çå„Åæ„Åô„Åå„ÄÅ„Å©„ÅÜ„ÅÑ„ÅÜÊÑèÂë≥„Å†„Çç„ÄÇ„ÄÇ„ÄÇ\nÂÉï„ÅÆÊñπ„Åß„ÇÇËÄÉ„Åà„Å¶„Åø„Åæ„Åô„ÄÇ„ÇÇ„ÅóË©∞„Åæ„Å£„Åü„Çâ„Åù„ÅÆÊôÇÁÇπ„Åß„Åä‰∫í„ÅÑ„ÅÆ„Çè„Åã„Å£„Å¶„ÅÑ„Çã„ÄåÊâã„Åå„Åã„Çä„Äç„ÇíÂÖ±Êúâ„Åó„Åæ„Åó„Çá„ÅÜ„Åã„ÄÇ',
                        delay: 1000
                    };
                }

                // „Éí„É≥„Éà„ÉªÊâã„Åå„Åã„ÇäÔºà„Éë„Çπ„ÉØ„Éº„Éâ„ÅÆËøîÁ≠îÂæå„ÅÆ„ÅøÔºâ
                if (storyState.askedAboutPassword &&
                    (message.includes('„Éí„É≥„Éà') || message.includes('Êâã„Åå„Åã„Çä') ||
                     message.includes('„Çè„Åã„Çâ„Å™„ÅÑ') || message.includes('ÂàÜ„Åã„Çâ„Å™„ÅÑ'))) {
                    storyState.hintCount++;
                    saveState();

                    if (storyState.hintCount === 1) {
                        return {
                            text: '5955->„É°„É¢„Å®„Åã„ÅØ„Éí„É≥„Éà„Å™„Çì„Åß„Åó„Çá„ÅÜ„Å≠„ÄÇ„ÄÇ„ÄÇ„Åù„ÅÆ„Åæ„Åæ„Å†„Å®ÊñáÂ≠óÊï∞„ÅåÂêà„Çè„Å™„ÅÑ„Åß„Åô„Åó„ÄÇ„ÄÇ„ÄÇ',
                            delay: 1000
                        };
                    } else if (storyState.hintCount === 2) {
                        return {
                            text: 'Êï∞Â≠ó„ÅÆËâ≤ÂàÜ„Åë„ÇÇÊÑèÂë≥„Åå„ÅÇ„Çä„Åù„ÅÜ„Åß„Åô„Çà„Å≠„ÄÇÈùí„Å®Ëµ§„Å£„Å¶„Å™„Çì„Å†„Çç„ÄÇ',
                            delay: 1000
                        };
                    } else {
                        return {
                            text: 'Èùí„Å®Ëµ§„ÅßË®òËºâ„Åï„Çå„ÅüÊñáÂ≠ó„Åå„ÅÇ„Çå„Å∞„ÅÑ„ÅÑ„Çì„Åß„Åô„Åë„Å©„ÄÇ„ÄÇ„ÄÇ',
                            delay: 1000
                        };
                    }
                }

                // nemophila„ÉªÊñ∞„Çµ„Ç§„Éà„ÅÆ„É™„É≥„ÇØ ‚Üí Phase 2„Å´ÁßªË°å
                if (message.includes('nemophila') || message.includes('neurolife-pharma.com/internal')) {
                    storyState.phase = 2;
                    saveState();
                    return {
                        text: '„Çµ„Ç§„Éà‰∏äÈÉ®„ÅÆNEUROLIFE PHARMACEUTICALS„ÅÆÊñáÂ≠ó„Å´Ëâ≤„Å®Êï∞Â≠ó„ÅåÂØæÂøú„Åó„Å¶„Åü„Å®„ÅÑ„ÅÜ„Åì„Å®„Åß„Åô„Å≠ÔºÅ\nÊñ∞„Çµ„Ç§„Éà„Å´Ë°å„Åë„Åæ„Åó„Åü„ÄÇË©≥„Åó„Åè„Çµ„Ç§„Éà„ÇíË¶ã„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ',
                        delay: 1000
                    };
                }
            }

            // Phase 2Â∞ÇÁî®: Êñ∞„Çµ„Ç§„ÉàÂÜÖ„ÅÆË™øÊüª
            if (storyState.phase === 2) {
                // Á§æÂì°Ë™çË®º
                if (message.includes('Á§æÂì°Ë™çË®º')) {
                    return {
                        text: 'ÂÜÖÂÆπ„ÇíË¶ã„Çã„Åü„ÇÅ„Å´„ÅØID„Å®„Éë„Çπ„ÉØ„Éº„Éâ„ÇíË¶ã„Å§„Åë„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åù„ÅÜ„Åß„Åô„Å≠„ÄÇ',
                        delay: 1000
                    };
                }

                // Ë£ΩÂìÅÊÉÖÂ†±„ÄÅneurosync„ÄÅmemoriaplus„ÄÅdreamlink
                if (message.includes('Ë£ΩÂìÅÊÉÖÂ†±') || message.includes('Ë£ΩÂìÅ') ||
                    message.includes('neurosync') || message.includes('memoriaplus') || message.includes('dreamlink')) {
                    return {
                        text: 'Ë£ΩÂìÅ„Å´Èñ¢„Åô„ÇãÊÉÖÂ†±„ÅåÊ¨≤„Åó„ÅÑ„Åß„Åô„Åë„Å©„ÄÅ„Åù„ÅÆ„Åü„ÇÅ„Å´„ÅØÁ§æÂì°Ë™çË®º„ÇíÁ™ÅÁ†¥„Åó„Å™„ÅÑ„Å®„ÄÇ',
                        delay: 1000
                    };
                }

                // Á†îÁ©∂„É¨„Éù„Éº„Éà
                if (message.includes('Á†îÁ©∂„É¨„Éù„Éº„Éà') || message.includes('„É¨„Éù„Éº„Éà')) {
                    return {
                        text: 'Á†îÁ©∂„É¨„Éù„Éº„Éà„ÇÇÁ§æÂì°Ë™çË®º„Åå„Åã„Åã„Å£„Å¶„Åæ„Åô„Å≠„ÄÇ',
                        delay: 1000
                    };
                }

                // „Çµ„Ç§„ÉàÈÄ≤ÊçóÂ†±Âëä
                if (message.includes('„Çµ„Ç§„ÉàÈÄ≤ÊçóÂ†±Âëä') || (message.includes('ÈÄ≤ÊçóÂ†±Âëä') && !message.includes('no.7') && !message.includes('no7'))) {
                    return {
                        text: '„Åì„Åì„Å†„Åë„ÅØÂà∂Èôê„Å™„ÅèË¶ã„Çå„Åæ„Åô„Å≠ÔºÅ„Å°„Çá„Å£„Å®Ë™ø„Åπ„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                        delay: 1000
                    };
                }

                // „Éë„Çπ„ÉØ„Éº„Éâ
                if (message.includes('„Éë„Çπ„ÉØ„Éº„Éâ')) {
                    storyState.askedAboutPassword2 = true;
                    storyState.hintCount2 = 0;
                    saveState();
                    return {
                        text: '„Éë„Çπ„ÉØ„Éº„Éâ„Å´Èñ¢„Åó„Å¶„ÅØ„Éí„É≥„Éà„Åã„Çâ„Çè„Åã„Å£„Åü„Çä„Åô„Çã„Çì„Åß„Åô„Åã„Å≠„ÄÇÂÉï„ÇÇË™ø„Åπ„Å¶„Åø„Åæ„Åô„ÄÇË©∞„Åæ„Å£„Åü„Çâ„Åï„Å£„Åç„Å®Âêå„Åò„Åß„ÄåÊâã„Åå„Åã„Çä„Äç„ÇíÂÖ±Êúâ„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                        delay: 1000
                    };
                }

                // „Éí„É≥„Éà„ÉªÊâã„Åå„Åã„ÇäÔºà„Éë„Çπ„ÉØ„Éº„Éâ„ÅÆËøîÁ≠îÂæå„ÅÆ„ÅøÔºâ
                if (storyState.askedAboutPassword2 &&
                    (message.includes('„Éí„É≥„Éà') || message.includes('Êâã„Åå„Åã„Çä') ||
                     message.includes('„Çè„Åã„Çâ„Å™„ÅÑ') || message.includes('ÂàÜ„Åã„Çâ„Å™„ÅÑ'))) {
                    storyState.hintCount2++;
                    saveState();

                    if (storyState.hintCount2 === 1) {
                        return {
                            text: 'Á∑ö„ÇíËæø„Çã„Å®lemon„Å®„ÅÑ„ÅÜÊñáÂ≠ó„Åå„Åß„Åç„Çã„Å®„ÅÑ„ÅÜ„Åì„Å®„Å™„Çì„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ',
                            delay: 1000
                        };
                    } else if (storyState.hintCount2 === 2) {
                        return {
                            text: 'Â§ß„Åç„ÅÑÂõõËßí„Å®Â∞è„Åï„ÅÑÂõõËßí„Åå„ÅÇ„Çä„Åæ„Åô„Å≠„ÄÇ„Åì„Çå„ÅØ‰Ωï„ÅåÈÅï„ÅÜ„Çì„Å†„Çç„ÅÜ„ÄÇ',
                            delay: 1000
                        };
                    } else {
                        return {
                            text: '3Á®ÆÈ°û„ÅÆ„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„ÉàË°®Ë®ò„ÅÆ„ÇÇ„ÅÆ„ÅåË¶ã„Å§„Åã„Çå„Å∞„ÅÑ„ÅÑ„Çì„Åß„Åô„Åë„Å©„ÄÇ',
                            delay: 1000
                        };
                    }
                }

                // Ëá®Â∫äË©¶È®ìË¢´È®ìËÄÖ„Éù„Éº„Çø„É´
                if (message.includes('Ëá®Â∫äË©¶È®ìË¢´È®ìËÄÖ„Éù„Éº„Çø„É´') || message.includes('Ë¢´È®ìËÄÖ„Éù„Éº„Çø„É´')) {
                    return {
                        text: '‰∏≠Ë∫´„ÇíË¶ã„Åü„Åè„Å¶„ÇÇË™çË®º„Åå„Åã„Åã„Å£„Å¶„Åæ„Åô„Å≠„ÄÇ',
                        delay: 1000
                    };
                }

                // „Çª„Ç≠„É•„É™„ÉÜ„Ç£„Ç§„É≥„Ç∑„Éá„É≥„Éà
                if (message.includes('„Çª„Ç≠„É•„É™„ÉÜ„Ç£„Ç§„É≥„Ç∑„Éá„É≥„Éà') || message.includes('„Ç§„É≥„Ç∑„Éá„É≥„Éà')) {
                    return {
                        text: '„Å©„ÅÜ„ÇÑ„ÇâÈÅéÂéª„Å´Ëá®Â∫äË©¶È®ì„ÅÆÂÜÖÈÉ®ÊÉÖÂ†±„ÅåAI„Ç∑„Çπ„ÉÜ„É†„Åã„ÇâÊºè„Çå„Åü„Çà„ÅÜ„Åß„Åô„Å≠„ÄÇ',
                        delay: 1000
                    };
                }

                // iris
                if (message.includes('iris')) {
                    return {
                        text: '„Å™„Çã„Åª„Å©ÔºÅË£ΩÂìÅÊÉÖÂ†±„Åå„Åù„Çå„Åû„Çå„Å´ÂÖ•„Çã„Çì„Åß„Åô„Å≠„ÄÇ„Åß„ÇÇ„Éë„Çπ„ÉØ„Éº„Éâ„Å†„Åë„Çè„Åã„Å£„Å¶„ÇÇ„Å£„Å¶ÊÑü„Åò„Åß„Åô„Çà„Å≠„ÄÇ',
                        delay: 1000
                    };
                }

                // ÈÄ≤ÊçóÂ†±Âëä No.7
                if (message.includes('ÈÄ≤ÊçóÂ†±Âëä') && (message.includes('no.7') || message.includes('no7') || message.includes('7'))) {
                    return {
                        text: 'AI„Çµ„Éù„Éº„Éà„Åã„ÇâÊ∂à„Åï„Çå„ÅüÈÄ≤ÊçóÂ†±Âëä„ÅÆ„Ç¢„Éº„Ç´„Ç§„Éñ„ÅåË¶ã„Çå„Åù„ÅÜ„Å™„ÅÆ„Åß„Åô„Åå„ÄÅ„Éë„Çπ„ÉØ„Éº„Éâ„Åß„É≠„ÉÉ„ÇØ„Åï„Çå„Å¶„Åæ„Åô„Å≠„ÄÇ',
                        delay: 1000
                    };
                }

                // tatsumilog
                if (message.includes('tatsumilog')) {
                    return {
                        text: '„Åì„Çå„Å£„Å¶„ÄÇ„ÄÇ„ÄÇ„Å®„Çì„Åß„ÇÇ„Å™„ÅÑ„Åì„Å®„Å´Ë∂≥„ÇíË∏è„ÅøÂÖ•„Çå„Åü„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ„Åß„Åô„Å≠„ÄÇ„ÄÇ„ÄÇ„Å®„Çä„ÅÇ„Åà„Åö„ÄÅAI„Çµ„Éù„Éº„Éà„Åß„ÅÑ„Çç„ÅÑ„ÇçË™ø„Åπ„Çã„Åó„Åã„Å™„ÅÑ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ',
                        delay: 1000
                    };
                }
            }

            // ‰∏ÄËà¨ÁöÑ„Å™ÂøúÁ≠î
            if (message.includes('Â§ß‰∏àÂ§´') || message.includes('ÂøÉÈÖç')) {
                return {
                    text: 'ÂøÉÈÖç„Åó„Å¶„Åè„Çå„Å¶„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ\n\n„É¶„Ç¶„Çπ„Ç±„ÅÆ„Åì„Å®„ÄÅÁµ∂ÂØæ„Å´Ë¶ã„Å§„Åë„Åæ„Åô„ÄÇ',
                    delay: 1000
                };
            }

            // „Éá„Éï„Ç©„É´„ÉàÂøúÁ≠î
            return {
                text: '‰Ωï„ÅãÊñ∞„Åó„ÅÑÊÉÖÂ†±„ÇíË¶ã„Å§„Åë„Åü„Çâ„ÄÅ„Åô„Åê„Å´Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n‰∏ÄÁ∑í„Å´„É¶„Ç¶„Çπ„Ç±„ÇíÊé¢„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                delay: 1000
            };
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();

            if (message === '') return;

            addMessage(message, true);
            input.value = '';

            showTyping();

            const response = getBotResponse(message);

            setTimeout(() => {
                hideTyping();
                addMessage(response.text, false);
                // addMessage„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂÆå‰∫Ü„ÇíÂæÖ„Å£„Å¶„Çπ„ÇØ„É≠„Éº„É´
                setTimeout(() => {
                    scrollToBottom();
                }, 400);

                if (response.callback) {
                    response.callback();
                }
            }, response.delay || 1000);
        }

        function sendQuickReply(text) {
            document.getElementById('userInput').value = text;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ
        window.addEventListener('DOMContentLoaded', function() {
            loadMessages();
        });
    </script>
</body>
</html>
